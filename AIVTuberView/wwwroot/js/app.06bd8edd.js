(function(){"use strict";var n={9863:function(n,e,t){var o=t(9242),r=t(3396);const i={ref:"canvas"};function a(n,e,t,o,a,s){return(0,r.wg)(),(0,r.iD)("canvas",i,null,512)}var s=t(9815),c=t(6565),u=t(7063),l=t(6024),d=t(9096),f={name:"App",data(){return{app:null,model:null,audioCtx:new AudioContext,processor:null}},async mounted(){u._Y.registerTicker(c.vB),s.M.registerPlugin(c.Sb),d.Th.registerPlugin("interaction",l.bx),this.app=new s.M({view:this.$refs.canvas,resizeTo:window,backgroundColor:65280}),this.model=await u._Y.from("/maidmade2/maidmade2.model3.json"),this.app.stage.addChild(this.model),this.model.x=100,this.model.y=100,this.model.rotation=Math.PI,this.model.skew.x=Math.PI,this.model.scale.set(.2,.2),this.model.anchor.set(1,.1),this.model._autoInteract=!1;let n=this;window.model=this.model;let e=0;this.processor=n.audioCtx.createScriptProcessor(2048,1,1),this.processor.onaudioprocess=function(n){var t,o=n.inputBuffer.getChannelData(0),r=o.length,i=e=0;while(e<r)i+=Math.abs(o[e++]);t=Math.sqrt(i/r);let a=window.model.internalModel.settings.getLipSyncParameters();for(let e=0;e<Object.keys(a).length;e++)console.log(t/100),window.model.internalModel.coreModel.setParameterValueById(a[e],t,1)},window.playAudio=function(e){window.playing=!0,e.addEventListener("canplaythrough",(async function(){let t=n.audioCtx.createMediaElementSource(e);t.connect(n.processor),t.connect(n.audioCtx.destination),n.processor.connect(n.audioCtx.destination),await new Promise((n=>{e.onended=n,e.play()})),window.played.onPlayed()}),!1)}}},h=t(89);const p=(0,h.Z)(f,[["render",a]]);var m=p;(0,o.ri)(m).mount("#app")}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,loaded:!1,exports:{}};return n[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=n,function(){var n=[];t.O=function(e,o,r,i){if(!o){var a=1/0;for(l=0;l<n.length;l++){o=n[l][0],r=n[l][1],i=n[l][2];for(var s=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(t.O).every((function(n){return t.O[n](o[c])}))?o.splice(c--,1):(s=!1,i<a&&(a=i));if(s){n.splice(l--,1);var u=r();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=n.length;l>0&&n[l-1][2]>i;l--)n[l]=n[l-1];n[l]=[o,r,i]}}(),function(){t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,{a:e}),e}}(),function(){t.d=function(n,e){for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}}(),function(){t.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n}}(),function(){var n={143:0};t.O.j=function(e){return 0===n[e]};var e=function(e,o){var r,i,a=o[0],s=o[1],c=o[2],u=0;if(a.some((function(e){return 0!==n[e]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(c)var l=c(t)}for(e&&e(o);u<a.length;u++)i=a[u],t.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return t.O(l)},o=self["webpackChunkai"]=self["webpackChunkai"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(9863)}));o=t.O(o)})();
//# sourceMappingURL=app.06bd8edd.js.map